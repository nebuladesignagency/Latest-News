(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,s=window.wp.blockEditor,o=window.wp.components,a=window.wp.element,n=window.wp.apiFetch;var l=e.n(n);const r=window.ReactJSXRuntime;function d(e,t){return(0,r.jsx)("div",{className:`latest-news-grid grid columns-${t.columns}`,children:e.map(e=>{const s=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,o=e._embedded?.["wp:featuredmedia"]?.[0]?.alt_text||"",a=(e._embedded,e._embedded?.["wp:term"]?.find(e=>"category"===e?.[0]?.taxonomy)||[]),n=a.length>0?[a[0]]:[];return(0,r.jsxs)("a",{className:"card",href:e.link,children:[t.showThumbnails&&s&&(0,r.jsxs)("div",{className:"card-thumbnail",children:[n.length>0&&(0,r.jsx)("div",{className:"card-category",children:n.map(e=>(0,r.jsx)("span",{children:e.name},e.id))}),(0,r.jsx)("img",{src:s,alt:o,className:"attachment-medium size-medium wp-post-image"})]}),(0,r.jsxs)("div",{className:"card-meta",children:[(0,r.jsx)("h2",{className:"card-title",children:e.title.rendered}),t.showDate&&(0,r.jsx)("div",{className:"card-date",children:(0,r.jsx)("span",{className:"datetime",children:new Date(e.date).toLocaleDateString()})}),t.showExcerpt&&(0,r.jsx)("div",{className:"card-excerpt",children:e.excerpt.rendered.replace(/<[^>]+>/g,"")}),(0,r.jsx)("div",{className:"button has-primary-background-color",children:(0,r.jsx)("span",{children:"Read More"})})]})]},e.id)})})}const c=JSON.parse('{"apiVersion":2,"name":"latest-news-block/latest-news","title":"Latest News","category":"widgets","icon":"list-view","description":"A custom block to display latest news posts with Ajax.","supports":{"html":false},"attributes":{"postsToShow":{"type":"number","default":"3"},"columns":{"type":"number","default":"3"},"showAuthor":{"type":"boolean","default":true},"showExcerpt":{"type":"boolean","default":true},"showDate":{"type":"boolean","default":true},"showThumbnails":{"type":"boolean","default":true}},"editorScript":"file:./build/index.js","render":"file:./render.php"}');(0,t.registerBlockType)(c.name,{...c,edit:function({attributes:e,setAttributes:t}){const n=(0,s.useBlockProps)(),[c,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{l()({path:`/wp/v2/posts?per_page=${e.postsToShow}&_embed`}).then(i).catch(()=>i([]))},[e.postsToShow]);const h=(0,r.jsx)(s.InspectorControls,{children:(0,r.jsxs)(o.PanelBody,{title:"Settings",children:[(0,r.jsx)(o.RangeControl,{label:"Number of Posts",value:e.postsToShow,onChange:e=>t({postsToShow:e}),min:1,max:10}),(0,r.jsx)(o.RangeControl,{label:"Grid Columns",value:e.columns,onChange:e=>t({columns:e}),min:1,max:4}),(0,r.jsx)(o.ToggleControl,{label:"Show Author",checked:e.showAuthor,onChange:()=>t({showAuthor:!e.showAuthor})}),(0,r.jsx)(o.ToggleControl,{label:"Show Excerpt",checked:e.showExcerpt,onChange:()=>t({showExcerpt:!e.showExcerpt})}),(0,r.jsx)(o.ToggleControl,{label:"Show Date",checked:e.showDate,onChange:()=>t({showDate:!e.showDate})}),(0,r.jsx)(o.ToggleControl,{label:"Show Thumbnails",checked:e.showThumbnails,onChange:()=>t({showThumbnails:!e.showThumbnails})})]})});return(0,r.jsxs)("div",{...n,children:[h,d(c||[],e)]})},save:()=>null})})();